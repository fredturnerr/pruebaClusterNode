{
  "name": "collective",
  "version": "0.3.1",
  "author": {
    "name": "Andrius Virbičianskas",
    "email": "a@ndri.us",
    "url": "http://a.ndri.us/"
  },
  "description": "Data synchronization/cache tool for multiple Node.js instances.",
  "licenses": [
    {
      "type": "MIT",
      "url": "https://raw.github.com/arch1t3ct/collective.js/master/LICENSE"
    }
  ],
  "engines": {
    "node": ">=0.8.x"
  },
  "devDependencies": {
    "jslint": "0.2.4"
  },
  "keywords": [
    "cluster",
    "load balancing",
    "multi process",
    "data synchronization",
    "cache"
  ],
  "homepage": "https://github.com/arch1t3ct/collective.js",
  "bugs": {
    "url": "https://github.com/arch1t3ct/collective.js/issues"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/arch1t3ct/collective.js.git"
  },
  "scripts": {
    "test": "node test/index.js"
  },
  "readme": "[![build status](https://secure.travis-ci.org/arch1t3ct/collective.js.png)](http://travis-ci.org/arch1t3ct/collective.js)\n#collective.js\n\nA simple tool for synchronizing data across multiple [Node.js](http://nodejs.org/) instances. \nCreates dual one-way tcp connections to each remote instance. Every data change is asynchronously \nsent to all of those instances. Very useful when using with \n[Cluster](http://nodejs.org/api/cluster.html) module, multiple servers, cloud instances, or any \nother multi [Node.js](http://nodejs.org/) configuration.\n\n_Experimental. Use at your own risk. Is not suitable for systems which require 100% precision and \nsynchronous data updates._\n\n## Installation\n\n```\nnpm install collective\n```\n\n## Basic Usage (full example)\n\nA fully working demonstration on how to use this with single or multiple servers where \n[Cluster](http://nodejs.org/api/cluster.html) is used for [Node.js](http://nodejs.org/) scaling.\n\nEvery [Node.js](http://nodejs.org/) process has the same configuration with the exception of \n`localhost` variable which should be selected per server basis (if multiple servers are used):\n\n\n```js\n/* Load necessary modules */\nvar cluster = require('cluster');\nvar Collective = require('collective');\n\n/* Config. Edit to suit your needs */\nvar cpu_count = require('os').cpus().length; // A good practice to use all of availabe processors.\nvar hosts = ['127.0.0.1'/*, host2, host3, etc */]; // Depends on how many servers you have.\nvar localhost = hosts[0]; // Select a proper host from hosts pool for the current server.\nvar port = 9000; // Starting port. Arbitrary, really.\n\n/**\n *  Populate with all possible hosts based on cpu count. WARNING: This will not work if your servers\n *  have different cpu counts. If that's the case - create all_hosts array manually.\n */\nvar all_hosts = [];\nfor (var i = 0; i < hosts.length; i++) {\n    for (var j = 0; j < cpu_count; j++) {\n        all_hosts.push({host: hosts[i], port: port + j});\n    }\n}\n\n/* Bootup cluster */\nif (true === cluster.isMaster) {\n    /* Additional mapping is required in order to preserve worker ids when they are restarted. */\n    var map = {};\n\n    function forkWorker(worker_id) {\n        var worker = cluster.fork({worker_id: worker_id});\n\n        map[worker.id] = worker_id;\n    }\n\n    for (var i = 0; i < cpu_count; i++) {\n        forkWorker(i);\n    }\n\n    /* You should do some error logging here (left out for the sake of simplicity) */\n    cluster.on('exit', function (worker, code, signal) {\n        var old_worker_id = map[worker.id];\n\n        delete map[worker.id];\n\n        forkWorker(old_worker_id);\n    });\n} else {\n    /* Set a local host and a port for collective to use. Based on worker id. */\n    var local = {host: localhost, port: port + parseInt(process.env.worker_id, 10)};\n\n    /* Start collective. */\n    var collective = new Collective(local, all_hosts, function (collective) {\n        /**\n         *  All done! This is where you start your normal coding. Lines below are just a\n         *  demonstration of collective.js set/increment/delete synchronization capabilities.\n         */\n\n        collective.set('over.nine.thousand', 0);\n\n        /* Timeouts are for demonstration purposes only, just to wait for the final result. */\n        setTimeout(function () {\n            console.log('Hey, I am ' + collective.local.host + ':' + collective.local.port\n                + ' and my \\'over.nine.thousand\\' key has a value of: '\n                + collective.get('over.nine.thousand'));\n\n            setTimeout(function () {\n                collective.set('over.nine.thousand', 9000, collective.OPERATIONS.INCREMENT);\n\n                setTimeout(function () {\n                    console.log('Hey, it\\'s me again, ' + collective.local.host + ':'\n                        + collective.local.port\n                        + ', and my \\'over.nine.thousand\\' key after 9000 x '\n                        + all_hosts.length + ' hosts increment operations has a value of: '\n                        + collective.get('over.nine.thousand'));\n\n                    setTimeout(function () {\n                        collective.set('over.nine.thousand', null, collective.OPERATIONS.DELETE);\n\n                        setTimeout(function () {\n                            console.log('Hey, once more it\\'s me, ' + collective.local.host + ':'\n                                + collective.local.port\n                                +', and my \\'over.nine.thousand\\' key after delete operation has a '\n                                + 'value of: ' + collective.get('over.nine.thousand'));\n                        }, 1000);\n                    }, 100);\n                }, 1000);\n            }, 100);\n        }, 100);\n    });\n}\n```\n\n## Features\n\n  * Non-blocking data synchronization across multiple [Node.js](http://nodejs.org/) processes and servers.\n  * Deep object notation sets and gets ('foo.bar.quz.etc...'). \n  * Seamless scaling. Add a host to `hosts` variable and restart [Node.js](http://nodejs.org/). That's it.\n  * Blazing fast! Data is stored in-memory (javascript variable).\n  * SET, INCREMENT, DELETE your data.\n\n## API\n#### collective.set(key, value, operation);\n\n###### Arguments\n`key` - **String** location where to store a value. Dots (this.is.my.var) are supported which will result in 4 level deep object.  \n`value` - **Mixed** anything you want to store. Internally values are converted to JSON string so no need to do that beforehand.  \n`operation` - **Integer** what you want to do. Currently 3 operations are supported: SET (default), INCREMENT, DELETE.\n```js\ncollective.set('this.is.my.var', 9000); // Sets a value. Creates if doesn't exist, replaces if does.\ncollective.set('this.is.my.var', 1, collective.OPERATIONS.INCREMENT); // Increments a value. Should be 9001 after this.\ncollective.set('this.is.my.var', null, collective.OPERATIONS.DELETE); // Deletes last part of the key (var in this case). Value is ignored.\n```\n\n#### collective.get(key);\n\n###### Arguments\n`key` - **String** location from which to retrieve a value.\n```js\ncollective.get('this.is.my.var'); // Results in: 9001\ncollective.get('this.is.my'); // Results in: {var: 9001}\n```\n\n## Testing and JSlint\n\nRunning the tests:\n```\nnode test/index.js\n```\n\nChecking code standards:\n```\n./build/jslint.sh\n```\n\n## More information\n\nArticle (a bit outdated) about the inner workings and concepts can be found on my [blog/portfolio](http://a.ndri.us/blog/collective-js-increase-your-node-js-application-performance-even-more).\n\n\nTo this date, this library has been tested with 3 servers, 8 processes each, with 3 level object nesting and a total \nof about 2 000 000 keys with up to 100 SET operations per second.\n\nFor better understanding I would also recommend looking at `test/index.js` file.\n\n## License\n\nCopyright (c) 2012-2013 Andrius Virbičianskas <a@ndri.us> (http://a.ndri.us/)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and \nassociated documentation files (the \"Software\"), to deal in the Software without restriction, \nincluding without limitation the rights to use, copy, modify, merge, publish, distribute, \nsublicense, and/or sell copies of the Software, and to permit persons to whom the Software is \nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial \nportions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT \nNOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND \nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES \nOR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN \nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.",
  "readmeFilename": "README.md",
  "_id": "collective@0.3.1",
  "_from": "collective@"
}
